@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    color-scheme: dark;
    --background: 5, 5, 5;
    --foreground: 250, 250, 250;
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-border: rgba(255, 255, 255, 0.08);
    --accent: 99, 102, 241;
}

[data-theme='light'] {
    color-scheme: light;
    --background: 250, 250, 250;
    --foreground: 12, 12, 12;
    --glass-bg: rgba(0, 0, 0, 0.035);
    --glass-border: rgba(0, 0, 0, 0.12);
    --accent: 79, 70, 229;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    overflow-x: hidden;
    transition: background-color 0.5s ease, color 0.5s ease;
    -webkit-font-smoothing: antialiased;
}

.font-display {
    font-family: 'Playfair Display', serif;
}

/* 
   TRIPLE-LOCK CONTRAST BRIDGE 
   Defensive CSS to prevent browsers (Avast/Brave/Chrome) from 
   incorrectly inverting colors on primary interactive elements.
*/

/* 1. Global Opacity Bridge for Standard Text */
[data-theme='light'] .text-foreground {
    color: rgb(var(--foreground)) !important;
}

[data-theme='light'] .text-foreground\/5 {
    color: rgba(var(--foreground), 0.20) !important;
}

[data-theme='light'] .text-foreground\/10 {
    color: rgba(var(--foreground), 0.30) !important;
}

[data-theme='light'] .text-foreground\/20 {
    color: rgba(var(--foreground), 0.45) !important;
}

[data-theme='light'] .text-foreground\/30 {
    color: rgba(var(--foreground), 0.55) !important;
}

[data-theme='light'] .text-foreground\/40 {
    color: rgba(var(--foreground), 0.65) !important;
}

[data-theme='light'] .text-foreground\/50 {
    color: rgba(var(--foreground), 0.75) !important;
}

[data-theme='light'] .text-foreground\/60 {
    color: rgba(var(--foreground), 0.85) !important;
}

[data-theme='light'] .text-foreground\/70 {
    color: rgba(var(--foreground), 0.90) !important;
}

[data-theme='light'] .text-foreground\/80 {
    color: rgba(var(--foreground), 0.95) !important;
}

[data-theme='light'] .text-foreground\/90 {
    color: rgba(var(--foreground), 0.98) !important;
}

/* 2. Inverted Component Overrides (Buttons/Pills) 
   We use explicit HEX codes here to bypass browser-level variable interceptors. 
*/
.bg-foreground {
    background-color: rgb(var(--foreground)) !important;
}

.text-background {
    color: rgb(var(--background)) !important;
    /* Fallback for browsers with forced-dark-mode heuristic */
    -webkit-text-fill-color: rgb(var(--background)) !important;
}

[data-theme='dark'] .text-background {
    color: #050505 !important;
    -webkit-text-fill-color: #050505 !important;
}

[data-theme='light'] .text-background {
    color: #fafafa !important;
    -webkit-text-fill-color: #fafafa !important;
}

/* 3. Forced Colors Support (Accessibility Mode) */
@media (forced-colors: active) {
    .bg-foreground {
        forced-color-adjust: none;
        background-color: ButtonText !important;
    }

    .text-background {
        forced-color-adjust: none;
        color: ButtonFace !important;
    }
}

.glass {
    background: var(--glass-bg);
    -webkit-backdrop-filter: blur(16px);
    backdrop-filter: blur(16px);
    border: 1px solid var(--glass-border);
    transition: background 0.5s ease, border 0.5s ease;
}

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgb(var(--background));
}

::-webkit-scrollbar-thumb {
    background: rgba(var(--foreground), 0.1);
    border-radius: 10px;
}